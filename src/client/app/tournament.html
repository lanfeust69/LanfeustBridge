<h2 class="text-center">Tournament {{_tournament ? _tournament.name : tournamentName}}</h2>
<p class="text-center" *ngIf="_tournament">Created on : {{_tournament.date.toLocaleDateString('en-US')}}</p>
<p class="text-center">{{diagnostic}}</p>
<div class="container" *ngIf="_tournament">
    <form (ngSubmit)="onSubmit()" #tournamentForm="ngForm">
        <fieldset *ngIf="true" [disabled]="!_edit"> <!-- *ngIf is a workaround for a known angular2 bug -->
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" [(ngModel)]="_tournament.name" [disabled]="_created"
                    placeholder="Tournament name" ngControl="name" required #name="ngForm">
                <div [hidden]="name.valid" class="alert alert-danger">
                    Name is required
                </div>
            </div>
            <div class="form-group">
                <label for="movement">Movement</label>
                <select class="form-control" required [(ngModel)]="_tournament.movement">
                    <option *ngFor="#m of _knownMovements" [value]="m">{{m}}</option>
                </select>
            </div>
            <div class="form-group">
                <label for="name">Number of tables</label>
                <input type="number" class="form-control" [(ngModel)]="_tournament.nbTables" required>
            </div>
            <div class="form-group">
                <label for="name">Number of rounds</label>
                <input type="number" class="form-control" [(ngModel)]="_tournament.nbRounds" required>
            </div>
            <div [hidden]="isValid" class="alert alert-danger">
                {{_invalidReason}}
            </div>
        </fieldset>
        <button *ngIf="_edit" type="submit" class="btn btn-primary" [disabled]="!tournamentForm.form.valid || !isValid">{{_created ? "Update" : "Create"}}</button>
        <button *ngIf="!_edit" class="btn btn-primary" (click)="_edit = !_edit">Edit</button>
    </form>
</div>
